<!DOCTYPE html>
<html class="t-grey">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Todo App With Firebase Part 1 (android)</title>
  <meta name="description" content="  This tutorial assumes you are familiar with basics of Android development including Android Studio, java and gradle.">

  <link href='https://fonts.googleapis.com/css?family=Roboto:400,400italic,700|Roboto+Mono:400,500' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="/iOSAndroidChaosOverFlow/css/main.css">
  <link rel="canonical" href="http://shubhank101.github.io/iOSAndroidChaosOverFlow/2016/06/todo-app-with-firebase-part-1-(Android)">
  <link rel="alternate" type="application/rss+xml" title="iOS/Android [ChaosOverFlow]" href="http://shubhank101.github.io/iOSAndroidChaosOverFlow/feed.xml">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-78888527-1', 'auto');
    ga('send', 'pageview');

  </script>
  
</head>

  <body>
    <nav class="c-navigation is-fixed">
  <div class="c-navigation__container u-container">
    <a class="c-navigation__item " href="/iOSAndroidChaosOverFlow/">Home</a>
    <a class="c-navigation__item " href="/iOSAndroidChaosOverFlow/tutorials/">Tutorial</a>
    <a class="c-navigation__item " href="/iOSAndroidChaosOverFlow/about/">About</a>
  </div>
</nav>


    <article class="c-article">
  <header class="c-header c-article__header">
    <div class="u-container">
      <h1 class="c-header__title">Todo App With Firebase Part 1 (android)</h1>
    </div>
  </header>

  <div class="c-article__main">
    <blockquote>
  <p>This tutorial assumes you are familiar with basics of Android development including Android Studio, java and gradle.</p>
</blockquote>

<h1 id="what-is-firebase">What is Firebase?</h1>

<p><img src="https://1.bp.blogspot.com/-YIfQT6q8ZM4/Vzyq5z1B8HI/AAAAAAAAAAc/UmWSSMLKtKgtH7CACElUp12zXkrPK5UoACLcB/s1600/image00.png" alt="Firebase logo" /></p>

<p><strong>Firebase</strong> is a multi purpose sdk which can be used to integrate push notifications in your app, app analytics and a whole lot of other features which you can review on its site.</p>

<p>We are going to use <strong>Firebase Realtime Database</strong> here to develop a simple To-do app.</p>

<h2 id="step-1-setting-up-android-project">Step 1. Setting up Android Project</h2>

<blockquote>
  <p>Prerequisite : You need to have Studio with version <strong>1.5</strong> or higher for the services to work.</p>
</blockquote>

<p>Create a new Android Studio Project and name it TodoApp.
Now note down the <strong>package name</strong>, we will need it to make the <code class="highlighter-rouge">google-services.json</code> file.</p>

<p>Head over to <a href="https://console.firebase.google.com/">Firebase console</a> and click <strong>Create New Project</strong>. Enter TodoApp as the name project and click create project. You will be redirected to a screen like this</p>

<p><img src="http://i.imgur.com/41Rq8Ij.jpg" alt="Firebase Console" /></p>

<p>Click Add firebase to your Android project and in the popup - <strong>Enter your package name</strong></p>

<p><img src="http://i.imgur.com/s7EuCON.jpg" alt="Package popup" /></p>

<p>Press Add app and now you will get the <strong>google-services.json</strong> downloaded automatically. Now keep pressing continue to finish the integration steps and get back to the project.</p>

<p>Drag the json you downloaded into your project root (where .build gradle file is of the app module). The json file actually includes all the relevant settings for the firebase app including the firebase database url for your app.</p>

<h3 id="setup-gradle">Setup Gradle</h3>

<p>Open your project build.gradle file and add the following dependencies</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"> dependencies {
      classpath 'com.android.tools.build:gradle:2.1.0'
      classpath 'com.google.gms:google-services:3.0.0'
  }</code></pre></figure>

<p>Now open your app module build.grade and add these dependencies</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml">    compile 'com.google.firebase:firebase-core:9.0.1'
    compile 'com.google.firebase:firebase-database:9.0.1'</code></pre></figure>

<p>At the end of the file we need to apply our google play servcies plugin :</p>

<p><code class="highlighter-rouge">apply plugin: 'com.google.gms.google-services'</code></p>

<p>Sync your gradle and you will have the firebase setup in your project.</p>

<h2 id="step-2-making-the-app-ui">Step 2. Making the App UI</h2>

<p>We need to setup a basic UI to actually see our firebase code in work. I am going to explain in short here with enough details to actually carry out yourself.</p>

<p>We will be having two activity in this project. MainActivity and TodoActivity.<br />
 The UI you need to make is shown in the screenshot</p>

<p><img src="http://i.imgur.com/iyLXjKU.jpg" alt="App's UI" /></p>

<p>The first activity has a recycleview and a Floating action button (FAB) in it. We will fill the recycle view with our firebase todo list and the action button takes to the TodoActivity using intent.</p>

<p>The TodoActivity has three Textviews and two EditText + a date picker in it. Pretty simple stuff.
 Make a new <strong>TodoActivity.java</strong> class in your project and make the appropriate layout for it. Make sure to give ids to EditText, DatePicker to access them in activity.
 Also add a FAB in this class on which we will actually save our Todo to the firebase db. Give appt id to it</p>

<h2 id="step-3-making-the-model">Step 3. Making the Model</h2>

<p>Our Todo won’t be a ArrayList or Hashmap lying around here and there in a project. We will make a proper model class for it.
Make a new <strong>Todo.java</strong> in your project and replace its content with the following</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">ublic</span> <span class="kd">class</span> <span class="nc">Todo</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">date</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">Todo</span><span class="o">()</span> <span class="o">{</span>

    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">getDate</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">date</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="n">setDate</span><span class="o">(</span><span class="n">String</span> <span class="n">date</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">date</span> <span class="o">=</span> <span class="n">date</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="n">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="n">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="n">getMessage</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="n">setMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">toFirebaseObject</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">todo</span> <span class="o">=</span>  <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;();</span>
        <span class="n">todo</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>
        <span class="n">todo</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
        <span class="n">todo</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"date"</span><span class="o">,</span> <span class="n">date</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">todo</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre></figure>

<h2 id="step-4-back-to-understanding-how-firebase-works">Step 4. Back to understanding how Firebase works</h2>

<p>The database your app has on the firebase cloud is available on a public url like https://appname-randomIdentifer.firebaseio.com/.
Since it is public anyone can read/write to it if the url is known. To solve this the <strong>database rules</strong> section is provided where you can change the access/write rights.</p>

<p>By default firebase database require user to be authenticated before writing to the database.</p>

<h3 id="changing-database-rules">Changing Database Rules</h3>

<p>In this begginer tutorial we are going to remove the authentication required to read/write from our database. Note: <strong>You should not have this for a production app</strong>.</p>

<p>Go to the database section in the firebase console and change to the rules tab. Update the rules with the below and click publish.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nt">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">".read"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">".write"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p><img src="http://i.imgur.com/W4a6Xjm.jpg" alt="Rules" /></p>

<h2 id="database-structure">Database Structure</h2>

<p>Firebase database is actually a NoSQL
one, you won’t see any tables and where clauses in it and it is therefore <strong>a big change</strong> for many developers out there.</p>

<p>Our app has a simple Todo structure which arranged in a typical SQL database would look like.</p>

<table>
  <tbody>
    <tr>
      <td>Name</td>
      <td>Message</td>
      <td>Date</td>
    </tr>
    <tr>
      <td>First</td>
      <td>Message</td>
      <td>10/10/16 10:10</td>
    </tr>
  </tbody>
</table>

<p>But in <strong>Firebase JSON syntax</strong>, we would have to do something like this
<img src="http://i.imgur.com/rGOklwM.jpg" alt="Db structure" /></p>

<p>Each todo is uniquely identified by its key which firebase creates and our todoList is actually and array for the key <strong>todo</strong> in our db.</p>

<hr />

<h2 id="coding-actual-firebase-logic">Coding Actual Firebase Logic</h2>

<h3 id="step-5-saving-a-new-todo-in-the-firebase-db">Step 5. Saving a new Todo in the Firebase Db</h3>

<p>Now switch to TodoActivity.java and get the reference of the FAB button and set a clicklistener to it. In it we call our <strong>saveTodo</strong> method.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">        <span class="n">FloatingActionButton</span> <span class="n">fab</span> <span class="o">=</span> <span class="o">(</span><span class="n">FloatingActionButton</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">fab</span><span class="o">);</span>
        <span class="n">fab</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="n">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">saveTodo</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>
        
        <span class="kt">void</span> <span class="n">saveTodo</span><span class="o">()</span> <span class="o">{</span>
            <span class="c1">// first section</span>
            <span class="c1">// get the data to save in our firebase db</span>
            <span class="n">EditText</span> <span class="n">nameEdtText</span> <span class="o">=</span> <span class="o">(</span><span class="n">EditText</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">nameEditText</span><span class="o">);</span>
            <span class="n">EditText</span> <span class="n">messageEditText</span> <span class="o">=</span> <span class="o">(</span><span class="n">EditText</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">messageEditText</span><span class="o">);</span>
            <span class="n">DatePicker</span> <span class="n">datePicker</span> <span class="o">=</span> <span class="o">(</span><span class="n">DatePicker</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">datePicker</span><span class="o">);</span>
            <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">();</span>
            <span class="n">date</span><span class="o">.</span><span class="na">setMonth</span><span class="o">(</span><span class="n">datePicker</span><span class="o">.</span><span class="na">getMonth</span><span class="o">());</span>
            <span class="n">date</span><span class="o">.</span><span class="na">setYear</span><span class="o">(</span><span class="n">datePicker</span><span class="o">.</span><span class="na">getYear</span><span class="o">());</span>
            <span class="n">date</span><span class="o">.</span><span class="na">setDate</span><span class="o">(</span><span class="n">datePicker</span><span class="o">.</span><span class="na">getDayOfMonth</span><span class="o">());</span>
    
            <span class="n">SimpleDateFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"dd/MM/yyyy HH:mm"</span><span class="o">);</span>
    
            <span class="n">String</span> <span class="n">dateString</span> <span class="o">=</span> <span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">date</span><span class="o">);</span>
            <span class="c1">//make the modal object and convert it into hasmap</span>
    
          
            <span class="c1">//second section</span>
            <span class="c1">//save it to the firebase db</span>
            <span class="n">FirebaseDatabase</span> <span class="n">database</span> <span class="o">=</span> <span class="n">FirebaseDatabase</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
            <span class="n">String</span> <span class="n">key</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">getReference</span><span class="o">(</span><span class="s">"todoList"</span><span class="o">).</span><span class="na">push</span><span class="o">().</span><span class="na">getKey</span><span class="o">();</span>
    
            <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Todo</span><span class="o">();</span>
            <span class="n">todo</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">nameEdtText</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
            <span class="n">todo</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="n">messageEditText</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
            <span class="n">todo</span><span class="o">.</span><span class="na">setDate</span><span class="o">(</span><span class="n">dateString</span><span class="o">);</span>
    
            <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">childUpdates</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
            <span class="n">childUpdates</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="n">key</span><span class="o">,</span> <span class="n">todo</span><span class="o">.</span><span class="na">toFirebaseObject</span><span class="o">());</span>
            <span class="n">database</span><span class="o">.</span><span class="na">getReference</span><span class="o">(</span><span class="s">"todoList"</span><span class="o">).</span><span class="na">updateChildren</span><span class="o">(</span><span class="n">childUpdates</span><span class="o">,</span> <span class="k">new</span> <span class="n">DatabaseReference</span><span class="o">.</span><span class="na">CompletionListener</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="n">onComplete</span><span class="o">(</span><span class="n">DatabaseError</span> <span class="n">databaseError</span><span class="o">,</span> <span class="n">DatabaseReference</span> <span class="n">databaseReference</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">databaseError</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">finish</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">});</span>
        <span class="o">}</span></code></pre></figure>

<p>Our code first section does the typical model object filling by getting the values from our view object. You can go ahead and add validation logic here if you want. The real firebase work is done in the second section.</p>

<p>In Second section , we get the database reference first and then try to get the “todoList” child in our db by calling <code class="highlighter-rouge">database.getReference("todoList")</code>.<br />
Since writing to our todoList endpoint each time will just overwrite previous values, we need to get a unique key for our new todo so that we can push it for that particular key only. We call the <code class="highlighter-rouge">push().getKey()</code> on our todoList endpoint.</p>

<p>Now we need to convert our model into a Hashmap since Firebase cannot save custom classes. <strong>String/ArrayList/Integer and Hashmap are the only supported types</strong>.
On the next line we define the childUpdate model that is for /todoList/key end point =&gt; set our dictionary object.
Calling the updateChildren performs the actual operation and we can pass a completion listener to detect any error that might have occured in the request.</p>

<p>Try running the app now and click the FAB button in MainActivity -&gt; goes to TodoActivity and in it save a new Todo. Firebase console should start showing up data that we save in the app.</p>

<h3 id="step-6-retreiving-all-our-todo-from-the-db">Step 6. Retreiving all our Todo from the DB</h3>

<p>Firebase allow you to constantly listen to a end point for any value but in our app we only want to load data once.
MainActivity code is given below :</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">   <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="n">AppCompatActivity</span> <span class="o">{</span>

    <span class="n">RecycleAdapter</span> <span class="n">adapter</span><span class="o">;</span>
    <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">todoList</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="n">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
        <span class="n">Toolbar</span> <span class="n">toolbar</span> <span class="o">=</span> <span class="o">(</span><span class="n">Toolbar</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">toolbar</span><span class="o">);</span>
        <span class="n">setSupportActionBar</span><span class="o">(</span><span class="n">toolbar</span><span class="o">);</span>

        <span class="n">FloatingActionButton</span> <span class="n">fab</span> <span class="o">=</span> <span class="o">(</span><span class="n">FloatingActionButton</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">fab</span><span class="o">);</span>
        <span class="n">fab</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="n">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">Intent</span> <span class="n">newIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span><span class="n">TodoActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                <span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">startActivity</span><span class="o">(</span><span class="n">newIntent</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">todoList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>

        <span class="n">RecyclerView</span> <span class="n">recyclerView</span> <span class="o">=</span> <span class="o">(</span><span class="n">RecyclerView</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">myrecycleView</span><span class="o">);</span>
        <span class="n">LinearLayoutManager</span> <span class="n">llm</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinearLayoutManager</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="n">recyclerView</span><span class="o">.</span><span class="na">setLayoutManager</span><span class="o">(</span><span class="n">llm</span><span class="o">);</span>
        <span class="n">adapter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RecycleAdapter</span><span class="o">();</span>
        <span class="n">recyclerView</span><span class="o">.</span><span class="na">setAdapter</span><span class="o">(</span><span class="n">adapter</span><span class="o">);</span>

        <span class="n">adapter</span><span class="o">.</span><span class="na">notifyDataSetChanged</span><span class="o">();</span>
    <span class="o">}</span>


    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="n">onResume</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onResume</span><span class="o">();</span>
        <span class="n">FirebaseDatabase</span> <span class="n">database</span> <span class="o">=</span> <span class="n">FirebaseDatabase</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

        <span class="n">database</span><span class="o">.</span><span class="na">getReference</span><span class="o">(</span><span class="s">"todoList"</span><span class="o">).</span><span class="na">addListenerForSingleValueEvent</span><span class="o">(</span>
                <span class="k">new</span> <span class="n">ValueEventListener</span><span class="o">()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onDataChange</span><span class="o">(</span><span class="n">DataSnapshot</span> <span class="n">dataSnapshot</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">todoList</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>

                        <span class="n">Log</span><span class="o">.</span><span class="na">w</span><span class="o">(</span><span class="s">"TodoApp"</span><span class="o">,</span> <span class="s">"getUser:onCancelled "</span> <span class="o">+</span> <span class="n">dataSnapshot</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">w</span><span class="o">(</span><span class="s">"TodoApp"</span><span class="o">,</span> <span class="s">"count = "</span> <span class="o">+</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">dataSnapshot</span><span class="o">.</span><span class="na">getChildrenCount</span><span class="o">())</span> <span class="o">+</span> <span class="s">" values "</span> <span class="o">+</span> <span class="n">dataSnapshot</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
                        <span class="k">for</span> <span class="o">(</span><span class="n">DataSnapshot</span> <span class="n">data</span> <span class="o">:</span> <span class="n">dataSnapshot</span><span class="o">.</span><span class="na">getChildren</span><span class="o">())</span> <span class="o">{</span>
                            <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">getValue</span><span class="o">(</span><span class="n">Todo</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                            <span class="n">todoList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
                        <span class="o">}</span>

                        <span class="n">adapter</span><span class="o">.</span><span class="na">notifyDataSetChanged</span><span class="o">();</span>
                    <span class="o">}</span>

                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onCancelled</span><span class="o">(</span><span class="n">DatabaseError</span> <span class="n">databaseError</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">w</span><span class="o">(</span><span class="s">"TodoApp"</span><span class="o">,</span> <span class="s">"getUser:onCancelled"</span><span class="o">,</span> <span class="n">databaseError</span><span class="o">.</span><span class="na">toException</span><span class="o">());</span>
                    <span class="o">}</span>
                <span class="o">});</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">RecycleAdapter</span> <span class="kd">extends</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span> <span class="o">{</span>


        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="n">getItemCount</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">todoList</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="n">onCreateViewHolder</span><span class="o">(</span><span class="n">ViewGroup</span> <span class="n">parent</span><span class="o">,</span> <span class="kt">int</span> <span class="n">viewType</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">View</span> <span class="n">v</span> <span class="o">=</span> <span class="n">LayoutInflater</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">parent</span><span class="o">.</span><span class="na">getContext</span><span class="o">()).</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">todo_item</span><span class="o">,</span> <span class="n">parent</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
            <span class="n">SimpleItemViewHolder</span> <span class="n">pvh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleItemViewHolder</span><span class="o">(</span><span class="n">v</span><span class="o">);</span>
            <span class="k">return</span> <span class="n">pvh</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="n">onBindViewHolder</span><span class="o">(</span><span class="n">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="n">holder</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">SimpleItemViewHolder</span> <span class="n">viewHolder</span> <span class="o">=</span> <span class="o">(</span><span class="n">SimpleItemViewHolder</span><span class="o">)</span> <span class="n">holder</span><span class="o">;</span>
            <span class="n">viewHolder</span><span class="o">.</span><span class="na">position</span> <span class="o">=</span> <span class="n">position</span><span class="o">;</span>
            <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">todoList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">);</span>
            <span class="o">((</span><span class="n">SimpleItemViewHolder</span><span class="o">)</span> <span class="n">holder</span><span class="o">).</span><span class="na">title</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">todo</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kd">final</span>  <span class="kd">class</span> <span class="nc">SimpleItemViewHolder</span> <span class="kd">extends</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="kd">implements</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span> <span class="o">{</span>
            <span class="n">TextView</span> <span class="n">title</span><span class="o">;</span>
            <span class="kd">public</span> <span class="kt">int</span> <span class="n">position</span><span class="o">;</span>
            <span class="kd">public</span> <span class="n">SimpleItemViewHolder</span><span class="o">(</span><span class="n">View</span> <span class="n">itemView</span><span class="o">)</span> <span class="o">{</span>
                <span class="kd">super</span><span class="o">(</span><span class="n">itemView</span><span class="o">);</span>
                <span class="n">itemView</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
                <span class="n">title</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">itemView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">myTextView</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="n">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>

            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre></figure>

<p>First we declare a ArrayList which will hold all our Todo model objects. Next we call the loadData method in our <code class="highlighter-rouge">onResume</code> method so that our data is refreshed everytime MainActivity is launched as well as when we come back to the view after saving a new Todo.
In <strong>loadData</strong> we get the reference to our <strong>todoList</strong> endpoint and call the <strong>addListenerForSingleValueEvent</strong> method since that observes the value event only one and is not kept in memory all the time listening for any real time changes in our end point. In the closure <strong>dataSnapshot.value</strong> contains the value of that endpoint.</p>

<p>If you observe the db in the console; each todo is uniquely identified by a key therefore in our case the snapshot.value actually contains children with as much number of Todo. If our model is a <strong>Java Pojo</strong> we can cast it into a <code class="highlighter-rouge">Todo</code> object using  <strong>data.getValue(Todo.class);</strong>. snapshot will contain all our todo so we enumberate its children which containe name,message and date of our Todo, we fill up our model with that and add it to the array. In the end we call our recycleview adapter <strong>notifyDataSetChanged</strong> to show the list of Todo in our UI.</p>

<h3 id="step-7-viewing-existing-todo">Step 7. Viewing existing Todo</h3>

<p>We do have our todo being retrieved and the name being shown in recycleview but clicking one should go to the <strong>TodoActivity</strong> and show all details right ? So in the <em>onClick</em> method in your ViewHolder class</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"> <span class="kd">@Override</span>
<span class="kd">public</span> <span class="n">void</span> <span class="nf">onClick</span><span class="p">(</span><span class="kt">View</span> <span class="n">view</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">Intent</span> <span class="n">newIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">Intent</span><span class="p">(</span><span class="kt">MainActivity</span><span class="o">.</span><span class="n">this</span><span class="p">,</span><span class="kt">TodoActivity</span><span class="o">.</span><span class="kd">class</span><span class="p">);</span>
    <span class="n">newIntent</span><span class="o">.</span><span class="nf">putExtra</span><span class="p">(</span><span class="s">"todo"</span><span class="p">,</span> <span class="n">todoList</span><span class="o">.</span><span class="nf">get</span><span class="p">(</span><span class="n">position</span><span class="p">));</span>
    <span class="kt">MainActivity</span><span class="o">.</span><span class="n">this</span><span class="o">.</span><span class="nf">startActivity</span><span class="p">(</span><span class="n">newIntent</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>Real simple code right there. Now you need to show those details in the outlets in your TodoActivity class. Update its <strong>onCreate</strong> with the following code</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"> <span class="c1">// previous onCreate code</span>
 <span class="k">if</span> <span class="p">(</span><span class="nf">getIntent</span><span class="p">()</span><span class="o">.</span><span class="nf">getExtras</span><span class="p">()</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="kt">Bundle</span> <span class="n">extras</span> <span class="o">=</span> <span class="nf">getIntent</span><span class="p">()</span><span class="o">.</span><span class="nf">getExtras</span><span class="p">();</span>
      <span class="kt">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="p">(</span><span class="kt">Todo</span><span class="p">)</span><span class="n">extras</span><span class="o">.</span><span class="nf">get</span><span class="p">(</span><span class="s">"todo"</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">todo</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
          <span class="kt">EditText</span> <span class="n">nameEdtText</span> <span class="o">=</span> <span class="p">(</span><span class="kt">EditText</span><span class="p">)</span><span class="nf">findViewById</span><span class="p">(</span><span class="kt">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">nameEditText</span><span class="p">);</span>
          <span class="kt">EditText</span> <span class="n">messageEditText</span> <span class="o">=</span> <span class="p">(</span><span class="kt">EditText</span><span class="p">)</span><span class="nf">findViewById</span><span class="p">(</span><span class="kt">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">messageEditText</span><span class="p">);</span>
          <span class="kt">DatePicker</span> <span class="n">datePicker</span> <span class="o">=</span> <span class="p">(</span><span class="kt">DatePicker</span><span class="p">)</span> <span class="nf">findViewById</span><span class="p">(</span><span class="kt">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">datePicker</span><span class="p">);</span>

          <span class="n">nameEdtText</span><span class="o">.</span><span class="nf">setText</span><span class="p">(</span><span class="n">todo</span><span class="o">.</span><span class="nf">getName</span><span class="p">());</span>
          <span class="n">messageEditText</span><span class="o">.</span><span class="nf">setText</span><span class="p">(</span><span class="n">todo</span><span class="o">.</span><span class="nf">getMessage</span><span class="p">());</span>

          <span class="kt">SimpleDateFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">SimpleDateFormat</span><span class="p">(</span><span class="s">"dd/MM/yyyy HH:mm"</span><span class="p">);</span>
          <span class="k">try</span> <span class="p">{</span>
              <span class="kt">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="n">format</span><span class="o">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">todo</span><span class="o">.</span><span class="nf">getDate</span><span class="p">());</span>
              <span class="n">datePicker</span><span class="o">.</span><span class="nf">updateDate</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="nf">getYear</span><span class="p">(),</span> <span class="n">date</span><span class="o">.</span><span class="nf">getMonth</span><span class="p">(),</span> <span class="n">date</span><span class="o">.</span><span class="nf">getDate</span><span class="p">());</span>
          <span class="p">}</span> <span class="nf">catch</span> <span class="p">(</span><span class="kt">ParseException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
              <span class="n">e</span><span class="o">.</span><span class="nf">printStackTrace</span><span class="p">();</span>
          <span class="p">}</span>
      <span class="p">}</span>
 <span class="p">}</span>
 </code></pre></figure>

<p>That’s it to have our todo app functioning on our firebase database :).</p>

<h2 id="conclusion">Conclusion</h2>

<p><strong>Thank you</strong> for reading this far. For any questions you are welcome to ask in our chat room.</p>

<h2 id="next-steps">Next Steps</h2>

<p>Please take a look at our other <a href="../../tutorials">tutorials</a> :)</p>


  </div>
<div id="disqus_thread" style="width:80%; margin-left: auto; margin-right: auto"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'chaosoverflow'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</article>


    <footer class="c-footer">
  <div class="u-container c-footer__container">
    <p> &copy; iOS/Android [ChaosOverFlow] 2016 </a> </p>
    <p>
      Author : <a href="http://github.com/Shubhank101" > Shubhank </a> 
      
      
      
      
    </p>
  </div>
</footer>

  </body>
</html>
